#!/usr/bin/make -f
# -*- makefile -*-
#
# Copyright (C) 2013 CNES - Centre National d'Etudes Spatiales
# Author: Julien Malik <julien.malik@c-s.fr>
#
# Monteverdi2 is distributed under the CeCILL license version 2. See files
# Licence_CeCILL_V2-en.txt (english version) or Licence_CeCILL_V2-fr.txt
# (french version) in 'Copyright' directory for details. This licenses are
# also available online:
# http://www.cecill.info/licences/Licence_CeCILL_V2-en.txt
# http://www.cecill.info/licences/Licence_CeCILL_V2-fr.txt

export DH_VERBOSE=1
include /usr/share/cdbs/1/rules/debhelper.mk
include /usr/share/cdbs/1/class/cmake.mk

OTB_VERSION_MAJOR  = @OTB_VERSION_MAJOR@
OTB_VERSION_SONAME = @OTB_VERSION_SONAME@
OTB_VERSION_FULL   = @OTB_VERSION_FULL@

SRC_VERSION_MAJOR  = @SRC_VERSION_MAJOR@
SRC_VERSION_MINOR  = @SRC_VERSION_MINOR@
SRC_VERSION_PATCH  = @SRC_VERSION_PATCH@
SRC_VERSION_FULL   = @SRC_VERSION_FULL@

PKG = monteverdi2

DEB_BUILD_PARALLEL = true
DEB_PARALLEL_JOBS  = 2

DEB_DESTDIR = $(CURDIR)/debian/tmp

DEB_CMAKE_INSTALL_PREFIX = /usr
DEB_CMAKE_EXTRA_FLAGS = \
	-DBUILD_SHARED_LIBS:BOOL=ON \
	-DMONTEVERDI2_OUTPUT_NAME:STRING=monteverdi2.bin

DEB_SHLIBDEPS_INCLUDE_$(PKG) = /usr/lib/otb
